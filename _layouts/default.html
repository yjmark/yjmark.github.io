<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
<head>
  <script data-cookieconsent="ignore">
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("consent", "default", {
      ad_personalization: "denied",
      ad_storage: "denied",
      ad_user_data: "denied",
      analytics_storage: "denied",
      functionality_storage: "denied",
      personalization_storage: "denied",
      security_storage: "granted",
      wait_for_update: 500,
    });
    gtag("set", "ads_data_redaction", true);
    gtag("set", "url_passthrough", false);
  </script>
   <script async src="https://www.googletagmanager.com/gtag/js?id=G-LYQ8K5BX18"></script>
   <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'G-LYQ8K5BX18', {
        cookie_domain: 'yjmark.github.io'
      });
   </script>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   {% seo %}
   <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
   <link rel="stylesheet" href="{{ "/assets/css/style.css?v=" | append: site.github.build_revision | relative_url }}">
   <link rel="stylesheet" href="{{ "/assets/css/custom.css" | relative_url }}">
   <!--[if lt IE 9]>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
   <![endif]-->
</head>
<body>
  {% include header.html %}
   <div class="wrapper">
      <header>
         <h1><a href="{{ "/" | absolute_url }}">{{ site.title | default: site.github.repository_name }}</a></h1>
         {% if site.logo %}
         <img src="{{site.logo | relative_url}}" alt="Logo" style="width: 150px; height: auto; border-radius: 50%; object-fit: cover;"/>
         {% endif %}
         <p>{{ site.description | default: site.github.project_tagline }}</p>
         {% if site.github.is_project_page %}
         <p class="view"><a href="{{ site.github.repository_url }}">View the Project on GitHub <small>{{ site.github.repository_nwo }}</small></a></p>
         {% endif %}
         {% if site.github.is_user_page %}
         <p class="view"><a href="{{ site.github.owner_url }}">View My GitHub Profile</a></p>
         {% endif %}
         {% if site.show_downloads %}
         <ul class="downloads">
            <li><a href="{{ site.github.zip_url }}">Download <strong>ZIP File</strong></a></li>
            <li><a href="{{ site.github.tar_url }}">Download <strong>TAR Ball</strong></a></li>
            <li><a href="{{ site.github.repository_url }}">View On <strong>GitHub</strong></a></li>
         </ul>
         {% endif %}
      </header>
      <section>
         {{ content }}
      </section>
      <footer>
         {% if site.github.is_project_page %}
         <p>This project is maintained by <a href="{{ site.github.owner_url }}">{{ site.github.owner_name }}</a></p>
         {% endif %}
         <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
   </div>
   <div id="consent-banner-manual">
    <span>This website uses cookies to personalize content and ads, to provide social media features and to analyze our traffic. It also shares information about your use of our site with our social media, advertizing and analytics partners who may combine it with other information that you have provided to them or that they have collected from your use of their services.</span>
    <br>
    <p><button onclick="updateGAConsent('granted')" class="consent-grant">Allow All</button>
    <button onclick="updateGAConsent('denied')" class="consent-deny">Do not sell or share my personal information</button></p>
    </div>
   <script src="{{ "/assets/js/scale.fix.js" | relative_url }}"></script>
   <script>
  function toggleMenu() {
    const nav = document.getElementById("navLinks");
    nav.classList.toggle("show");
    // 메뉴 클릭 시 자동 닫힘
  }
  document.addEventListener("DOMContentLoaded", () => {
    const links = document.querySelectorAll("#navLinks a");
    links.forEach(link => {
      link.addEventListener("click", () => {
        document.getElementById("navLinks").classList.remove("show");
      });
    });
  });
</script>
<script>
    function updateGAConsent(status) {
        const consentState = status === 'granted' ? 'granted' : 'denied';

        // 1. GA 동의 상태 업데이트 (사용자가 동의/거부했을 때 GA에 플래그 전송)
        gtag('consent', 'update', {
            'ad_storage': consentState,
            'analytics_storage': consentState,
            'ad_personalization': consentState,
            'ad_user_data': consentState,
            'functionality_storage': consentState,
            'personalization_storage': consentState,
        });

        // 2. 브라우저에 동의 기록 저장 (재방문 시 배너 숨김)
        localStorage.setItem('cookie_consent', consentState);
        
        // 3. 배너 숨기기
        document.getElementById('consent-banner-manual').style.display = 'none';
        
        // 4. (선택) 거부 시 기존 GA 쿠키 삭제 로직 추가 가능
        if (status === 'denied') {
            document.cookie = "_ga=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/";
        }
    }

    // 페이지 로드 시 기존 동의 상태 확인 및 배너 표시
    window.addEventListener('load', () => {
        const savedConsent = localStorage.getItem('cookie_consent');
        const banner = document.getElementById('consent-banner-manual');

        if (savedConsent) {
            // 이전 기록이 있으면, GA에 해당 상태를 업데이트
            updateGAConsent(savedConsent);
        } else {
            // 기록이 없으면, 배너를 표시
            banner.style.display = 'block';
        }
    });
</script>


</body>
</html>
